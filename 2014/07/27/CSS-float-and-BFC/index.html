
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>CSS浮动与BFC | 松的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="cginechen">
    
    <meta name="description" content="网页重构时经常会遇到浮动与清除浮动的时候，最开始掌握clear清除浮动的方式就以为清除浮动很简单，但现在觉得清除浮动真的不是件简单的事，学习到了BFC等东西，依然发现看似简单的东西蕴深层次的理论，懂得了其底层的原理，提前就能预料的产生的效果或者做好规划，才能高效的干活，省时省力。先来一段代码：
12">
    
    
    
    
    
    <link rel="icon" href="https://avatars3.githubusercontent.com/u/7828876?s=32">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="https://avatars3.githubusercontent.com/u/7828876?s=460" alt="松的博客" title="松的博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="松的博客">松的博客</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">存档</a></li>
					
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/07/27/CSS-float-and-BFC/" title="CSS浮动与BFC" itemprop="url">CSS浮动与BFC</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://www.cgspine.org" title="cginechen">cginechen</a>
    </p>
  <p class="article-time">
    <time datetime="2014-07-27T13:02:32.000Z" itemprop="dateModified">2014-07-27</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#利用clear属性来清除浮动"><span class="toc-number">1.</span> <span class="toc-text">利用clear属性来清除浮动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BFC"><span class="toc-number">2.</span> <span class="toc-text">BFC</span></a></li></ol>
		</div>
		
		<p>网页重构时经常会遇到浮动与清除浮动的时候，最开始掌握clear清除浮动的方式就以为清除浮动很简单，但现在觉得清除浮动真的不是件简单的事，学习到了BFC等东西，依然发现看似简单的东西蕴深层次的理论，懂得了其底层的原理，提前就能预料的产生的效果或者做好规划，才能高效的干活，省时省力。<br>先来一段代码：</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="doctype">&lt;!doctype html&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">title</span>&gt;</span>Clear float<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">            <span class="class">.f_box</span><span class="rules">{<span class="rule"><span class="attribute">float</span>:<span class="value">left</span></span>;<span class="rule">}</span></span></div><div class="line"></div><div class="line">        <span class="tag">&lt;/<span class="title">style</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"f_box"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"f_box"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"f_box"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/&lt;<span class="attribute">html</span>&gt;</span></div></pre></td></tr></table></figure><br>如果我们部清除浮动，那么父元素就会塌陷，因为float使得此元素脱离了父元素的文档流。</p>
<h2 id="利用clear属性来清除浮动">利用clear属性来清除浮动</h2>
<p>在子元素的某个元素添加clear:both属性后会清除前面的盒子的浮动，因此最开始我就熟悉用这种方法在父元素的最后面加上一个空盒子，然后定义类并且用于公用，看起来如下</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"container"</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"f_box"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"f_box"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"f_box"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"clear"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div><div class="line">&lt;/<span class="keyword">div</span>&gt;</div></pre></td></tr></table></figure><br>CSS代码</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class">.clear</span><span class="rules">{<span class="rule"><span class="attribute">clear</span>:<span class="value">both</span></span>;<span class="rule">}</span></span></div></pre></td></tr></table></figure><br>这样有需要就加上这个空盒子，但是这样就加了一大堆混淆内容的空盒子不利于内容与样式的分离，然后学习了css中：after这一属性后就采取全部用css来清除浮动了，html代码变为</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"container clear"</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"f_box"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"f_box"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"f_box"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div><div class="line">&lt;/<span class="keyword">div</span>&gt;</div></pre></td></tr></table></figure><br>CSS代码</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class">.clear</span><span class="pseudo">:after</span><span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">clear</span>:<span class="value">both</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">content</span>:<span class="value"><span class="string">''</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">display</span>:<span class="value"> block</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">0</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">visibility</span>:<span class="value"> hidden</span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure><br>这样后续只需在父元素中引入clear类就可以了，更加方便。</p>
<h2 id="BFC">BFC</h2>
<p>最近做项目时遇到布局问题，虽然自己实现了相关的界面，但导师指出这显然不是最优方案，并且介绍了BFC（Block Format Content），之前从未听过这个词，看后顿时觉得自己之前的探索是多么的肤浅。<br>w3c规范中的BFC定义：</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">浮动元素和绝对定位元素，非块级盒子的块级容器（例如 <span class="keyword">inline</span><span class="attribute">-blocks</span>, table<span class="attribute">-cells</span>, 和 table<span class="attribute">-captions</span>），以及overflow值不为“visiable”的块级盒子，都会为他们的内容创建新的BFC（块级格式上下文）。</div><div class="line">在BFC中，盒子从顶端开始垂直地一个接一个地排列，两个盒子之间的垂直的间隙是由他们的margin 值所决定的。在一个BFC中，两个相邻的块级盒子的垂直外边距会产生折叠。</div><div class="line">在BFC中，每一个盒子的左外边缘（margin<span class="attribute">-left</span>）会触碰到容器的左边缘(border<span class="attribute">-left</span>)（对于从右到左的格式来说，则触碰到右边缘）。</div></pre></td></tr></table></figure><br>这也就是BFC提供了一个封闭的空间，并且BFC不会与浮动元素发生重叠。形成BFC的条件就有以下几点：<br>1.float为 left|right<br>2.overflow为 hidden|auto|scroll<br>3.display为 table-cell|table-caption|inline-block<br>4.position为 absolute|fixed<br>因此就可以利用它提供的封闭盒子来清除浮动，如给container类加css</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class">.container</span><span class="rules">{<span class="rule"><span class="attribute">overflow</span>:<span class="value">hidden</span></span>;<span class="rule">}</span></span></div></pre></td></tr></table></figure><br>这样不用加其它任何处理就可以清除浮动了，实在方便。<br>其次也可以利用BFC来形成两栏布局，像一边宽度固定另一边宽度自适应就是个典型例子。</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"container"</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"left"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div><div class="line">    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"right"</span>&gt;&lt;/<span class="keyword">div</span>&gt;</div><div class="line">&lt;/<span class="keyword">div</span>&gt;</div></pre></td></tr></table></figure><br>当然可以用左边各自的浮动和右边盒子的margin-left来实现</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class">.container</span>{<span class="attribute">overflow</span><span class="value">:hidden;</span>}<span class="comment">//清除浮动</span></div><div class="line"><span class="class">.left</span>{<span class="attribute">width</span><span class="value">:<span class="number">100</span>px;</span><span class="attribute">height</span><span class="value">:<span class="number">100</span>px;</span><span class="attribute">float</span><span class="pseudo">:left</span>;<span class="attribute">background</span><span class="value">:<span class="hexcolor">#ff0000</span>;</span>}</div><div class="line"><span class="class">.right</span>{<span class="attribute">margin-left</span><span class="value">:<span class="number">100</span>px;</span><span class="attribute">height</span><span class="value">:<span class="number">250</span>px;</span><span class="attribute">background</span><span class="value">:<span class="hexcolor">#00ff00</span>;</span>}</div></pre></td></tr></table></figure><br>这种虽然实现了效果，但是两个盒子有着数字依赖，即改变左边盒子的宽度，右边盒子的margin-left属性就必须改变，而根据BFC的不会与浮动元素重叠，上述代码就可以改变为</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class">.container</span>{<span class="attribute">overflow</span><span class="value">:hidden;</span>}<span class="comment">//清除浮动</span></div><div class="line"><span class="class">.left</span>{<span class="attribute">width</span><span class="value">:<span class="number">100</span>px;</span><span class="attribute">height</span><span class="value">:<span class="number">100</span>px;</span><span class="attribute">float</span><span class="pseudo">:left</span>;<span class="attribute">background</span><span class="value">:<span class="hexcolor">#ff0000</span>;</span>}</div><div class="line"><span class="class">.right</span>{<span class="attribute">overflow</span><span class="value">:hidden;</span><span class="attribute">height</span><span class="value">:<span class="number">250</span>px;</span><span class="attribute">background</span><span class="value">:<span class="hexcolor">#00ff00</span>;</span>}</div></pre></td></tr></table></figure><br>如此就再也不用管margin-left了，当有改动时，改动就相对要小一些了，虽然看上去很小，不过却是很重要，每项小的重复加在一起就是很大的工作量了，最近苦学vim更是感觉到了小细节的重要性了。当然上述的清除浮动的方法没有加上zoom触发IE6的hasLayout属性来清除浮动。</p>
  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/CSS/">CSS</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/网页重构/">网页重构</a>
</div>



<!--<div class="article-share" id="share">

  <div data-url="http://www.cgspine.org/2014/07/27/CSS-float-and-BFC/" data-title="CSS浮动与BFC | 松的博客" data-tsina="null" class="share clearfix">
  </div>

</div>-->
</footer>   	       
	</article>
	
	
</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#利用clear属性来清除浮动"><span class="toc-number">1.</span> <span class="toc-text">利用clear属性来清除浮动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BFC"><span class="toc-number">2.</span> <span class="toc-text">BFC</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">目录</p>
		<ul>
		
			<li><a href="/categories/网页重构/" title="网页重构">网页重构<sup>1</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/CSS/" title="CSS">CSS<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
    <p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2014
    
    <a href="http://www.cgspine.org" target="_blank" title="cginechen">cginechen</a>
    
    </p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>






  </body>
</html>
